// s3.js - v0.1.0 - https://github.com/jpillora/aws-sdk-browser
// Jaime Pillora <dev@jpillora.com> - MIT Copyright 2013
!function(a,b){var c={hex:"0123456789abcdef",utf8:"\0",utf8_table:{},ascii:"\0\b	\n\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~Â€ÂÂ‚ÂƒÂ„Â…Â†Â‡ÂˆÂ‰ÂŠÂ‹ÂŒÂÂÂÂÂ‘Â’Â“Â”Â•Â–Â—Â˜Â™ÂšÂ›ÂœÂÂÂŸÂ Â¡Â¢Â£Â¤Â¥Â¦Â§Â¨Â©ÂªÂ«Â¬Â­Â®Â¯Â°Â±Â²Â³Â´ÂµÂ¶Â·Â¸Â¹ÂºÂ»Â¼Â½Â¾Â¿Ã€ÃÃ‚ÃƒÃ„Ã…Ã†Ã‡ÃˆÃ‰ÃŠÃ‹ÃŒÃÃÃÃÃ‘Ã’Ã“Ã”Ã•Ã–Ã—Ã˜Ã™ÃšÃ›ÃœÃÃÃŸÃ Ã¡Ã¢Ã£Ã¤Ã¥Ã¦Ã§Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯Ã°Ã±Ã²Ã³Ã´ÃµÃ¶Ã·Ã¸Ã¹ÃºÃ»Ã¼Ã½Ã¾Ã¿",ascii_table:{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,"\0":0,"":1,"":2,"":3,"":4,"":5,"":6,"":7,"\b":8,"	":9,"\n":10,"":11,"\f":12,"\r":13,"":14,"":15,"":16,"":17,"":18,"":19,"":20,"":21,"":22,"":23,"":24,"":25,"":26,"":27,"":28,"":29,"":30,"":31," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,"":127,"Â€":128,"Â":129,"Â‚":130,"Âƒ":131,"Â„":132,"Â…":133,"Â†":134,"Â‡":135,"Âˆ":136,"Â‰":137,"ÂŠ":138,"Â‹":139,"ÂŒ":140,"Â":141,"Â":142,"Â":143,"Â":144,"Â‘":145,"Â’":146,"Â“":147,"Â”":148,"Â•":149,"Â–":150,"Â—":151,"Â˜":152,"Â™":153,"Âš":154,"Â›":155,"Âœ":156,"Â":157,"Â":158,"ÂŸ":159,"Â ":160,"Â¡":161,"Â¢":162,"Â£":163,"Â¤":164,"Â¥":165,"Â¦":166,"Â§":167,"Â¨":168,"Â©":169,"Âª":170,"Â«":171,"Â¬":172,"Â­":173,"Â®":174,"Â¯":175,"Â°":176,"Â±":177,"Â²":178,"Â³":179,"Â´":180,"Âµ":181,"Â¶":182,"Â·":183,"Â¸":184,"Â¹":185,"Âº":186,"Â»":187,"Â¼":188,"Â½":189,"Â¾":190,"Â¿":191,"Ã€":192,"Ã":193,"Ã‚":194,"Ãƒ":195,"Ã„":196,"Ã…":197,"Ã†":198,"Ã‡":199,"Ãˆ":200,"Ã‰":201,"ÃŠ":202,"Ã‹":203,"ÃŒ":204,"Ã":205,"Ã":206,"Ã":207,"Ã":208,"Ã‘":209,"Ã’":210,"Ã“":211,"Ã”":212,"Ã•":213,"Ã–":214,"Ã—":215,"Ã˜":216,"Ã™":217,"Ãš":218,"Ã›":219,"Ãœ":220,"Ã":221,"Ã":222,"ÃŸ":223,"Ã ":224,"Ã¡":225,"Ã¢":226,"Ã£":227,"Ã¤":228,"Ã¥":229,"Ã¦":230,"Ã§":231,"Ã¨":232,"Ã©":233,"Ãª":234,"Ã«":235,"Ã¬":236,"Ã­":237,"Ã®":238,"Ã¯":239,"Ã°":240,"Ã±":241,"Ã²":242,"Ã³":243,"Ã´":244,"Ãµ":245,"Ã¶":246,"Ã·":247,"Ã¸":248,"Ã¹":249,"Ãº":250,"Ã»":251,"Ã¼":252,"Ã½":253,"Ã¾":254,"Ã¿":255},base64:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",_searchCharTable:function(a,b){for(var a=a+"",b=b+"",c=0,d=b.length,e=0,f="";e!=(e=c+d>>1);){if(f=(e>>>=0)<b.length?b[e]:"",a==f)return e;a>f?c=e:d=e}return 0},b2h:function(a){var b=this.hex+"",c=15&a>>4,d=15&a;return((c>>>=0)<b.length?b[c]:"0")+((d>>>=0)<b.length?b[d]:"0")},b64c:function(a){return"+"==a||"-"==a?62:"/"==a||"_"==a?63:a>="0"&&"9">=a?+a+52:this._searchCharTable(a,this.base64)},charCode:function(a){var b=this.ascii_table;return 1==a.length&&"Ã¿">=a?b[a]:this._searchCharTable(a,this.utf8)},a2b:function(a){var b=this.ascii_table;return 1==a.length&&"Ã¿">=a?b[a]:0},b2a:function(a){var b=this.ascii+"";return(a>>>=0)<b.length?b[a]:"\0"},fromCharCode:function(a){var b=this.ascii+"",c=this.utf8+"";return(a>>>=0)<b.length?b[a]:(a>>>=0)<c.length?c[a]:"\0"},astr2hstr:function(a){var b="",c=0,a=a+"";for(c=0;c<a.length;c++)b+=this.b2h(this.a2b(a[c]));return b},hstr2astr:function(a){var b=0,c=0,d="",e="",f=this.ascii+"",a=a+"";for(b=0;b<a.length;b++)1&b?(c=+("0x"+d+a[b]),e+=(c>>>=0)<f.length?f[c]:"\0"):d=a[b];return e},utf8_encode:function(a){var b="",c=0,d=0,e="",f=[0,0,0,0],g=[0,0];for(c=0;c<a.length;c++){if(d=this.a2b(e=a[c]),0!=g[0]){if(128>d||d>191){g=[0,0];continue}if(f[3&g[1]+1-g[0]--]=d,g[0])continue;b+=this.fromCharCode(1==g[1]?(31&f[0])<<6|63&f[1]:(15&f[0])<<12|(63&f[1])<<6|63&f[2])}f[0]=d,128>d?b+=e:d>191&&224>d?g=[1,1]:d>=224&&240>d&&(g=[2,2])}return b},utf8_decode:function(a){var b="",c=0,d=0,a=a+"",e=this.b2a(0);for(c=0;c<a.length;c++)d=this.charCode(e=a[c]),b+=128>d?e:2048>d?this.b2a(192|d>>6)+this.b2a(128|63&d):this.b2a(224|d>>12)+this.b2a(128|63&d>>6)+this.b2a(128|63&d);return b},base64_encode:function(a){return this._base64_encode(a,!1)},base64_urlencode:function(a){return this._base64_encode(a,!0)},_base64_encode:function(a,b){var c="",d=0,e=0,a=a+"",f=[0,0],g=b?"":"=",h=this.base64+"0123456789"+(b?"-_":"+/"),i=function(a){return(a>>>=0)<h.length?h[a]:"A"};for(d=0;d<a.length;d++)e=this.a2b(a[d]),2==d%3?(e+=(f[1]<<8)+(f[0]<<16),c+=i(63&e>>>18),c+=i(63&e>>>12),c+=i(63&e>>>6),c+=i(63&e),f=[0,0]):f[1&d%3]=e;return 0!=d%3&&(e=(f[1]<<8)+(f[0]<<16),c+=i(63&e>>>18),c+=i(63&e>>>12),c+=2==d%3?i(63&e>>>6):g,c+=g),c},base64_decode:function(a){var a=a+"",b="",c=[0,0,0,0],d=0,e="",f=0;for(0!=(3&a.length)&&(a+="="),d=0;d<a.length&&"="!=(e=a[d]);d++)f=this.b64c(e),3==(3&d)?(f+=(c[2]<<6)+(c[1]<<12)+(c[0]<<18),b+=this.b2a(255&f>>>16),b+=this.b2a(255&f>>>8),b+=this.b2a(255&f),c=[0,0,0,0]):c[3&d%4]=f;return(3&d)>1&&(f=(c[2]<<6)+(c[1]<<12)+(c[0]<<18),b+=this.b2a(255&f>>>16),3==(3&d)&&(b+=this.b2a(255&f>>>8))),b}},d=function(){var a={name:"sha1",identifier:"2b0e03021a",size:20,block:64,hash:function(a){for(var b=(a+="Â€").length,d=b>>6,e=63&b,f="",g=0,h=0,i=[1732584193,4023233417,2562383102,271733878,3285377520],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];56!=e++;)a+="\0",64==e&&(d++,e=0);for(a+="\0\0\0\0",e=3,b=8*(b-1);e>=0;e--)a+=c.b2a(255&b>>8*e);for(g=0;g<a.length;g++)h=(h<<8)+c.a2b(a[g]),3==(3&g)&&(j[15&g>>2]=h,h=0),63==(63&g)&&this._round(i,j);for(g=0;g<i.length;g++)for(h=3;h>=0;h--)f+=c.b2a(255&i[g]>>8*h);return f},_round:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=0,i=[1518500249,1859775393,2400959708,3395469782],j=function(a,b){return b<<a|b>>>32-a},k=0,l=function(a,b,c,d){return 20>a?b&c|~b&d:40>a?b^c^d:60>a?b&c|b&d|c&d:b^c^d};for(h=0;80>h;h++)h>=16&&(b[127&h]=j(1,b[127&h-3]^b[127&h-8]^b[127&h-14]^b[127&h-16])),k=0|j(5,c)+l(h,d,e,f)+g+b[127&h]+i[3&h/20],g=f,f=e,e=j(30,d),d=c,c=k;a[0]=0|a[0]+c,a[1]=0|a[1]+d,a[2]=0|a[2]+e,a[3]=0|a[3]+f,a[4]=0|a[4]+g}},b={name:"sha-256",identifier:"608648016503040201",size:32,block:64,key:[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],hash:function(a){for(var a=a+"Â€",b=a.length,d=b>>6,e=63&b,f="",g=0,h=0,i=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];56!=e++;)a+="\0",64==e&&(d++,e=0);for(a+="\0\0\0\0",e=3,b=8*(b-1);e>=0;e--)a+=c.b2a(255&b>>8*e);for(g=0;g<a.length;g++)h=(h<<8)+c.a2b(a[g]),3==(3&g)&&(j[15&g>>2]=h,h=0),63==(63&g)&&this._round(i,j);for(g=0;g<i.length;g++)for(h=3;h>=0;h--)f+=c.b2a(255&i[g]>>8*h);return f},_round:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=0,l=0,m=0,n=0;for(k=0;64>k;k++)16>k?n=b[15&k]:(l=b[15&k+1],m=b[15&k+14],n=b[15&k]=0|(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+b[15&k]+b[15&k+9]),n=n+j+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(i^g&(h^i))+this.key[63&k],j=i,i=h,h=g,g=0|f+n,f=e,e=d,d=c,c=0|n+(d&e^f&(d^e))+(d>>>2^d>>>13^d>>>22^d<<30^d<<19^d<<10);a[0]=0|a[0]+c,a[1]=0|a[1]+d,a[2]=0|a[2]+e,a[3]=0|a[3]+f,a[4]=0|a[4]+g,a[5]=0|a[5]+h,a[6]=0|a[6]+i,a[7]=0|a[7]+j}};return{sha256:b,sha1:a,SHA256:function(a){return c.astr2hstr(this.sha256.hash(a))},SHA1:function(a){return c.astr2hstr(this.sha1.hash(a))},hmac_hash:b,HMAC:function(a,b){var a=a+"",b=b+"",d=0,e=this.hmac_hash,f=0,g="",h="";for(a.length>e.block&&(a=e.hash(a));a.length<e.block;)a+="\0";for(d=0;d<a.length;d++)f=c.a2b(a[d]),g+=c.b2a(54^f),h+=c.b2a(92^f);return c.astr2hstr(e.hash(h+e.hash(g+b)))}}}();!function(a,b){!function(a,b,c){var d,e,f,g,h,j,k,l,m,n,o,p=[].slice;e="before",d="after",h="readyState",g="Invalid number or parameters. Please see API documentation.",(o=Array.prototype).indexOf||(o.indexOf=function(a){var b,c,d,e;for(b=d=0,e=this.length;e>d;b=++d)if(c=this[b],c===a)return b;return-1}),f=function(a){var b,d,e;return d={},e=function(a){return d[a]||[]},b={listeners:function(a){return Array.prototype.slice.call(e(a))},on:function(a,b,f){d[a]=e(a),d[a].indexOf(b)>=0||(f=f===c?d[a].length:f,d[a].splice(f,0,b))},off:function(a,b){var c;c=e(a).indexOf(b),-1!==c&&e(a).splice(c,1)},fire:function(){var b,c,d,f,g,h;for(c=arguments[0],b=2<=arguments.length?p.call(arguments,1):[],h=e(c),f=0,g=h.length;g>f;f++)d=h[f],d.apply(a,b)}}},m=f(),n={},n[e]=function(a,b){return m.on(e,a,b)},n[d]=function(a,b){return m.on(d,a,b)},j=function(a,b){var c,d,e,f,g,h;switch(null==b&&(b={}),typeof a){case"object":d=[];for(e in a)f=a[e],d.push(""+e+":	"+f);return d.join("\n");case"string":for(d=a.split("\n"),g=0,h=d.length;h>g;g++)c=d[g],/([^:]+):\s*(.+)/.test(c)&&(b[RegExp.$1]||(b[RegExp.$1]=RegExp.$2));return b}},n.headers=j,l=function(b){var c;c=a[b],c&&(a[b]=function(a){return"string"!=typeof a||/\.XMLHTTP/.test(a)?k(new c(a)):void 0})},l("ActiveXObject"),l("XMLHttpRequest"),k=function(a){var b,k,l,n,o,p,q,r,s,t,u,v,w,x,y;if(0===m.listeners(e).length&&0===m.listeners(d).length)return a;for(u=!1,r={headers:{}},s=null,v=f(),q=function(){o.status=s.status,o.statusText=s.statusText,s.headers||(s.headers={})},p=function(){o.responseType=s.type||"",o.response=s.data||null,o.responseText=s.text||s.data||"",o.responseXML=s.xml||null},k=0,t=function(a){var b,c,e;return n(),b=function(){for(;a>k&&4>k;)o[h]=++k,2===k&&q(),4===k&&p(),v.fire("readystatechange"),4===k&&v.fire("load")},4>a?b():(c=m.listeners(d),e=function(){var a;if(!c.length)return b();if(a=c.shift(),2===a.length)return a(r,s),e();if(3===a.length)return a(r,s,e);throw g},e(),void 0)},b=function(b){var c,d,e;c={};for(d in b)e=b[d],c[d]=e===a?o:e;return c},n=function(){var b,d,e,f,g;for(g=["timeout"],e=0,f=g.length;f>e;e++)d=g[e],a[d]&&r[d]===c&&(r[d]=a[d]);for(d in o)b=o[d],"function"==typeof b&&/^on(\w+)/.test(d)&&v.on(RegExp.$1,b)},a.onreadystatechange=function(){var b,c,d;if(2===a[h]){s.status=a.status,s.statusText=a.statusText,d=j(a.getAllResponseHeaders());for(b in d)c=d[b],s.headers[b]||(s.headers[b]=c)}4===a[h]&&(u=!1,s.type=a.responseType,s.text=a.responseText,s.data=a.response||s.text,s.xml=a.responseXML,t(a[h]))},y=["abort","progress"],w=0,x=y.length;x>w;w++)l=y[w],a["on"+l]=function(a){return v.fire(l,b(a))};return o={withCredentials:!1,response:null,status:0},o.addEventListener=function(a,b){return v.on(i,b)},o.removeEventListener=v.off,o.dispatchEvent=function(){},o.open=function(a,b,c){r.method=a,r.url=b,r.async=c,t(1)},o.send=function(b){var c,d,f;r.body=b,f=function(){var b,c,d;s={headers:{}},u=!0,a.open(r.method,r.url,r.async),a.timeout=r.timeout,d=r.headers;for(b in d)c=d[b],a.setRequestHeader(b,c);a.send(r.body)},c=m.listeners(e),d=function(){var a,b;if(!c.length)return f();if(a=function(a){return"object"!=typeof a||"number"!=typeof a.status?d():(s=a,t(4),void 0)},b=c.shift(),1===b.length)return a(b(r));if(2===b.length)return r.async=!0,b(r,a);throw g},d()},o.abort=function(){u&&a.abort(),v.fire("abort",arguments)},o.setRequestHeader=function(a,b){r.headers[a]=b},o.getResponseHeader=function(a){return s.headers[a]},o.getAllResponseHeaders=function(){return j(s.headers)},o.upload=f(),o},a.xhook=n}(a,b);var c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;for(g=location.protocol+"//"+location.host,x=function(a){return a="xdomain ("+g+"): "+a,console.warn?console.warn(a):alert(a)},C=["postMessage","JSON"],y=0,A=C.length;A>y;y++)if(h=C[y],!a[h])return x("requires '"+h+"' and this browser does not support it"),void 0;for(c="V0",k=function(){return(Math.random()*Math.pow(2,32)).toString(16)},p=function(a){return/(https?:\/\/[^\/]+)(\/.*)?/.test(a)?{origin:RegExp.$1,path:RegExp.$2}:null},w=function(a){var b;return a instanceof RegExp?a:(b=a.toString().replace(/\W/g,function(a){return"\\"+a}).replace(/\\\*/g,".+"),new RegExp("^"+b+"$"))},n=function(c){return b.addEventListener?a.addEventListener("message",c):a.attachEvent("onmessage",c)},s=function(a){return JSON.stringify(a)},j=function(a){return JSON.parse(a)},m=null,e=function(a){var b,c;null===m&&(m={},t());for(b in a)c=a[b],m[b]=c},t=function(){return n(function(a){var b,c,d,e,f,g,h,i,k,l,n,o,q;g=a.origin,i=null;for(d in m){l=m[d];try{if(e=w(d),e.test(g)){i=w(l);break}}catch(r){}}if(!i)return x("blocked request from: '"+g+"'"),void 0;if(b=a.source,f=j(a.data),n=f.msg,h=p(n.url),!h||!i.test(h.path))return x("blocked request to path: '"+h.path+"' by regex: "+l),void 0;k=new XMLHttpRequest,k.open(n.method,n.url),k.onreadystatechange=function(){var a;if(4===k.readyState)return a={status:k.status,statusText:k.statusText,type:"text",text:k.responseText,headers:xhook.headers(k.getAllResponseHeaders())},b.postMessage(s({id:f.id,msg:a}),g)},q=n.headers;for(c in q)o=q[c],k.setRequestHeader(c,o);return k.send(n.body||null)}),a===a.parent?x("slaves must be in an iframe"):a.parent.postMessage("XPING_"+c,"*")},v=null,f=function(a){var b,c;null===v&&(v={},u());for(b in a)c=a[b],v[b]=c},u=function(){return n(function(a){var b;return null!=(b=d.prototype.frames[a.origin])?b.recieve(a):void 0}),xhook.before(function(a,b){var c,e;return e=p(a.url),e&&v[e.origin]?(a.async===!1&&x("sync not supported"),c=new d(e.origin,v[e.origin]),c.send(a,b),void 0):b()})},d=function(){function a(a,c){return this.origin=a,this.proxyPath=c,this.frames[this.origin]?this.frames[this.origin]:(this.frames[this.origin]=this,this.listeners={},this.frame=b.createElement("iframe"),this.frame.id=this.frame.name="xdomain-"+k(),this.frame.src=this.origin+this.proxyPath,this.frame.setAttribute("style","display:none;"),b.body.appendChild(this.frame),this.waits=0,this.ready=!1,void 0)}return a.prototype.frames={},a.prototype.post=function(a){return this.frame.contentWindow.postMessage(a,this.origin)},a.prototype.listen=function(a,b){if(this.listeners[a])throw"already listening for: "+a;return this.listeners[a]=b},a.prototype.unlisten=function(a){return delete this.listeners[a]},a.prototype.recieve=function(a){var b,d;return/^XPING(_(V\d+))?$/.test(a.data)?RegExp.$2!==c?(x("your master is not compatible with your slave, check your xdomain.js verison"),void 0):(this.ready=!0,void 0):(d=j(a.data),(b=this.listeners[d.id])?(this.unlisten(d.id),b(d.msg)):(x("unkown message ("+d.id+")"),void 0))},a.prototype.send=function(a,b){var c=this;return this.readyCheck(function(){var d;return d=k(),c.listen(d,function(a){return b(a)}),c.post(s({id:d,msg:a}))})},a.prototype.readyCheck=function(a){var b=this;if(this.ready===!0)return a();if(this.waits++>=100)throw"Timeout connecting to iframe: "+this.origin;return setTimeout(function(){return b.readyCheck(a)},100)},a}(),a.xdomain=function(a){a&&(a.masters&&e(a.masters),a.slaves&&f(a.slaves))},xdomain.origin=g,D=b.getElementsByTagName("script"),z=0,B=D.length;B>z;z++)if(r=D[z],/xdomain/.test(r.src)){if(r.hasAttribute("slave")){if(o=p(r.getAttribute("slave")),!o)return;q={},q[o.origin]=o.path,f(q)}r.hasAttribute("master")&&(l={},l[r.getAttribute("master")]=/./,e(l))}}(a,b);var e,f,g,h,i,j,k,l;e="accessKeyId",f="secretAccessKey",l={"https://s3.amazonaws.com":"/jpillora-usa/xdomain/proxy.html","https://s3-ap-southeast-2.amazonaws.com":"/jpillora-aus/xdomain/proxy.html"},xdomain({slaves:l}),j=[];for(i in l)j.push(i);h={},d.hmac_hash=d.sha1,k=function(a,b){return c.base64_encode(c.hstr2astr(d.HMAC(a,b)))},g=function(a,b){var c,d,g,i,j,l,m,n,o,p,q,r,s,t,u;if(null==b&&(b=function(){}),!h[e])throw"NO AWS ACCESS SET";if(!h[f])throw"NO AWS SECRET SET";d="AWS "+h[e]+":",n=a.method||"GET",r=a.url||"",o=r.replace(/https?\:\/\/[^\/]+/,""),"GET"!==n&&(q="text/plain; charset=UTF-8"),a.type&&(q=a.type),i=(new Date).toUTCString(),g=a.body,t=new XMLHttpRequest,t.open(n,r),c=[],l={},p=function(a,b){return t.setRequestHeader(a,b),/^x-amz/i.test(a)&&c.push(a.toLowerCase()+":"+b),l[a]=b},q&&p("Content-Type",q),p("x-amz-date",i),u=a.headers;for(j in u)s=u[j],p(j,s);return m=[n,"",q,"",c.join("\n"),o].join("\n"),p("Authorization",d+k(h[f],m)),t.onreadystatechange=function(){return 4===t.readyState?b({status:t.status,requestHeaders:l,responseHeaders:xhook.headers(t.getAllResponseHeaders()),responseText:t.responseText}):void 0},t.send(g)},a.S3={endpoints:j,set:function(a){var b,c,d;d=[];for(b in a)c=a[b],d.push(h[b]=c);return d},getObject:function(a,b){return g({method:"GET",url:a},b)},putObject:function(a,b,c){return g({method:"PUT",url:a,body:b},c)}}}(window,document);